<section fxLayout="row wrap" fxLayoutAlign="center center">
  <mat-card class="mat-elevation-z8" fxFlex="90%">
    <mat-card-header>
      <mat-card-title>
        <div fxLayout="row" fxLayoutAlign="space-between center">
          <div>
            MTG Set - {{setData?.name}}
          </div>
          <div>
            123 / {{setData?.cardCount}} cards
          </div>
        </div>
      </mat-card-title>
      <mat-card-subtitle>
        <div fxLayout="row" fxLayoutAlign="space-between center">
          <div>
            Set completion: {{setStats?.nonFoilOwned | number : '.2-2'}} %
          </div>
          <div>
            Set price: 123,45 €
          </div>
          <div>
            Foil set completion: {{setStats?.foilOwned | number : '.2-2'}} %
          </div>
          <div>
            Foil set price: 1123,45 €
          </div>
        </div>
      </mat-card-subtitle>
    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>
      <table mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef>
            Qt.
          </th>
          <td mat-cell *matCellDef="let row">
            {{row.nonFoil}} / {{row.foil}}
          </td>
        </ng-container>
        <ng-container matColumnDef="image_data">
          <th mat-header-cell *matHeaderCellDef>
            Name
          </th>
          <td mat-cell *matCellDef="let row">
            <div fxFlex fxLayout="row" fxLayoutAlign="start center" style="margin-top: 5px">
              <div>
                <img [src]="row.image.cropped" [alt]="row.name" width="64" height="64">
              </div>
              <div fxFlex="100%" fxLayout="column" style="margin-left: 15px">
                <div fxLayout="row">
                  <div fxFlex="50%" fxLayoutAlign="start center">
                    <a routerLink="/collections/cards/{{row.id}}">
                      {{row.name}}
                    </a>
                  </div>
                  <div fxFlex="50%" fxLayoutAlign="start center">
                    {{row.type}}
                  </div>
                </div>
                <div fxLayout="row" fxLayoutAlign="start center">
                  <app-mana-cost [manaCost]="row.manaCost"></app-mana-cost>
                </div>
              </div>
            </div>
          </td>
        </ng-container>
        <ng-container matColumnDef="rarity">
          <th mat-header-cell *matHeaderCellDef>
            Rarity
          </th>
          <td mat-cell *matCellDef="let row">
            {{row.rarity | titlecase}}
          </td>
        </ng-container>
        <ng-container matColumnDef="collectorNumber">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            Collection #
          </th>
          <td mat-cell *matCellDef="let row">
            {{row.collectorNumber}}
          </td>
        </ng-container>
        <ng-container matColumnDef="nonFoilPrice">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            Regular price
          </th>
          <td mat-cell *matCellDef="let row">
            {{row.nonFoilPrice}}
            <button mat-icon-button color="primary" (click)="addRegular(row)">
              <mat-icon>
                add_circle
              </mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="removeRegular(row)">
              <mat-icon>
                remove_circle
              </mat-icon>
            </button>
          </td>
        </ng-container>
        <ng-container matColumnDef="foilPrice">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            Foil price
          </th>
          <td mat-cell *matCellDef="let row">
            {{row.foilPrice}}
            <button mat-icon-button color="primary" (click)="addFoil(row)">
              <mat-icon>
                add_circle
              </mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="removeFoil(row)">
              <mat-icon>
                remove_circle
              </mat-icon>
            </button>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="columns"></tr>
        <tr mat-row *matRowDef="let row; columns: columns"></tr>
      </table>
      <mat-paginator showFirstLastButtons [pageSizeOptions]="[20, 50, 100]"></mat-paginator>
    </mat-card-content>
  </mat-card>
</section>
